<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      lang="en">

<head>
    <title>ulozto remote downloader | input file link</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!--    <link href="../static/css/all.css" rel="stylesheet">-->
    <link th:href="@{/css/all.css}" rel="stylesheet"/>
    <!--    <link href="../static/style.css" rel="stylesheet">-->
    <link th:href="@{/style.css}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" th:src="@{/js/sockjs.js}"></script>
    <script type="text/javascript" th:src="@{/js/stomp.js}"></script>
    <script type="text/javascript" th:src="@{/js/script.js}"></script>
</head>
<body class="container-xl">
<div class="row">
    <a th:href="@{/ulozto/}" href="#">ulozto remote downloader</a>
</div>
<div th:switch="${future_status}" class="row">
    <div th:case="${true}">
        <!-- when downloader is not working -->
        <form class="form-control"
              action="#"
              th:action="@{/ulozto/get_link/page={page} (page=${page})}"
              method="post">
            <div>
                <span>Insert link</span>
            </div>
            <div class="input-group">
                <input class="form-control" type="text" value="" name="page">

                <button type="submit" class="btn btn-primary">send link</button>
            </div>

        </form>
    </div>
    <!-- resume button, hidden if resume is false -->
    <div th:hidden="${!resume}">resume
        <form class="form-control"
              action="#"
              th:action="@{/ulozto/resume_download/}"
              method="get">
            <button type="submit" class="btn btn-primary">resume</button>
        </form>

    </div>
    <!-- download status, hidden if download thread is inactive  -->
    <div th:case="${false}">
        <p>Source link:
            <span id="file_source">source</span>
        </p>

        <p>File name:
            <span id="file_name">name</span>
        </p>
        <p>Download progress:
        <div class="progress">
            <div class="progress-bar" id="progress" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0"
                 aria-valuemax="100">0%
            </div>
        </div>
        <span id="progress-text">progress</span>
        </p>
        <!-- cancel current download -->
        <form th:hidden="${future_status}"
              class="form-control"
              action="#"
              th:action="@{/ulozto/cancel_current/}"
              method="get">
            <button type="submit" class="btn btn-primary">cancel</button>
        </form>
        <!-- resume current download -->
    </div>
    <!-- last download file -->
    <div class="row small">
        <div class="row">
            <div class="col border">
                <b>Last download:</b>
            </div>
        </div>
        <div class="row border">
            <div class="col-2">
                <b>file name:</b>
            </div>
            <div class="col">
                some file
            </div>
            <div th:hidden="${!resume}" class="col-1">
                    <form
                          action="#"
                          th:action="@{/ulozto/resume_download/}"
                          method="get">
                        <button type="submit" class="btn btn-secondary btn-sm">resume</button>
                    </form>
            </div>
            <div th:hidden="${resume}" class="col-1 large">
                <b><i class="bi bi-check2 text-success large"></i></b>
            </div>
        </div>

        <div class="col"></div>
    </div>
    <!-- temporarily show set folder -->
    <div class="col">
        <span th:text="${download_folder}"></span>
    </div>
</div>

</body>
</html>